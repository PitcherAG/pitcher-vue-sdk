
## i18n Internationalization

### Date

```javascript
import { formatDate } from '@pitcher/vue-sdk'
const a = new Date()
formatDate(a, true) // local format date with year (false for day and month only)
```

### Numbers

#### Decimals
format a value with minimum and maximum fraction digits:

```javascript
import { formatDecimal } from '@pitcher/vue-sdk'
formatDecimal(123.456 , 2, 0) // 123.46
formatDecimal(100 , 2, 1) // 100.0
formatDecimal(100 , 2, 0) // 100
```  

#### Percent
format a percent value with minimum and maximum fraction digits:
     
 ```javascript
 import { formatPercent } from '@pitcher/vue-sdk'
 formatPercent(123.456 , 2, 0) // 123.46 %
 formatPercent(100 , 2, 1) // 100.0 %
 formatPercent(100 , 2, 0) // 100 %
 ```  

#### Currency
format a number value into a localized currency:
     
 ```javascript
 import { formatCurrency } from '@pitcher/vue-sdk'
 formatCurrency(123.456 , "EUR") // â‚¬ 123.46 
 formatCurrency(100000, "CHF") // sFr. 10'0000.00

 ```  


### Translations


#### Workflow

1. mark strings for translation
2. collect strings with `npm run makemessages`
3. edit .po files
4. transform .po file to json with `npm run makemessages`


#### Installation

in your main.js

```javascript
import { TranslationPlugin } from '@pitcher/vue-sdk'

Vue.use(TranslationPlugin)
```

In your App.vue call `await setLanguage('en_US')` to load the file `translations/en_US.json` that is in the public folder

```javascript
import { loadParams, loadConfig, useParamsStore, setLanguage } from '@pitcher/vue-sdk'

export default {
    setup() {
        console.log('App setup')
        const loaded = ref(false)

        onMounted(async () => {
            await loadParams()
            try {
                await loadConfig()
                const params = useParamsStore()
                await setLanguage(params.language.value)
            } catch (e) {
                console.warn(e)
                await setLanguage('en_US')
            }
            window.console.info('data loading finished')
            loaded.value = true
        })
        return { loaded }
    }
}

```

#### Marking strings for translation

There are 3 new global functions available `$gettext` and the short version of it `$t` for single and `$ngettext` fur plural translations

```html
<div>{{ $gettext('some text to be translated') }}</div>
```

or 

```html
<div>{{ $t('some text to be translated') }}</div>
```

or 

```html
<div>{{ $t('Good morning {username}.', {'username':user.username}) }}</div>
```


And for plurals:

```html
<div>{{ $ngettext('i have { num } tickets for {user}', num, {num, user}) }}</div>
```
In javascript:
```javascript
 const b = ref($gettext('translate this'))
```
or
```javascript
 const b = ref($t('translate this'))
```


##### String collection and translation

After all strings have been marked like this we will need to collect all this marked strings.

```
npm run makemessages
```

This will collect all `$t` `$gettext` and `$ngettext` strings marked as such and write
them into the `locale` folder into `.po` files. Po files can be edited with a tool such as PoEdit.

After the translations have been done another run of `npm run makemessages` will transform the .po file
into json files in the `public/translations` folder.

### Adding more languages

If you want to add more language to the process edit the Makefile and add further language codes to
the LOCALES variable


